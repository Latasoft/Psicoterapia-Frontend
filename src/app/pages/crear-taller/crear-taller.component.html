<form [formGroup]="tallerForm" (ngSubmit)="enviarFormulario()">

  <!-- SECCIÓN 1 -->
  <div *ngIf="seccionActual === 1" class="form-section">
    <h2>Taller de Duelo</h2>

    <label>
      Subtítulo:
      <input formControlName="subtitulo" type="text" />
    </label>
    <div *ngIf="tallerForm.get('subtitulo')?.invalid && tallerForm.get('subtitulo')?.touched" class="error">
      El subtítulo es obligatorio.
    </div>

    <label>
      Fecha de inicio:
      <input formControlName="fechaInicio" type="date" />
    </label>
    <div *ngIf="tallerForm.get('fechaInicio')?.invalid && tallerForm.get('fechaInicio')?.touched" class="error">
      La fecha de inicio es obligatoria.
    </div>

    <label>
      Valor:
      <input formControlName="valor" type="number" />
    </label>
    <div *ngIf="tallerForm.get('valor')?.invalid && tallerForm.get('valor')?.touched" class="error">
      El valor es obligatorio.
    </div>

    <label>
      Facilitador:
      <input formControlName="facilitador" type="text" />
    </label>
    <div *ngIf="tallerForm.get('facilitador')?.invalid && tallerForm.get('facilitador')?.touched" class="error">
      El facilitador es obligatorio.
    </div>

    <h3>Descripción de Servicio</h3>
    <div formGroupName="descripcionDeServicio">
      <label>
        Texto:
        <textarea formControlName="texto"></textarea>
      </label>
    </div>
    <div *ngIf="tallerForm.get('descripcionDeServicio.texto')?.invalid && tallerForm.get('descripcionDeServicio.texto')?.touched" class="error">
      La descripción es obligatoria.
    </div>

    <button type="button" (click)="siguienteSeccion()" [disabled]="!validarSeccionActual()">Siguiente</button>
    <button type="button" class="cancel-btn" routerLink="/admin-taller">Cancelar</button>
  </div>

  <!-- SECCIÓN 2 -->
  <div *ngIf="seccionActual === 2" class="form-section">
    <h3>Próximas Sesiones</h3>
    <div formArrayName="proximasSesiones">
      <div *ngFor="let sesion of proximasSesiones.controls; let i = index" [formGroupName]="i" class="sesion-box">
        <label>
          Día:
          <input formControlName="dia" type="text" />
        </label>
        <label>
          Fecha:
          <input formControlName="fecha" type="date" />
        </label>
        <label>
          Hora de inicio:
          <input formControlName="hora" type="time" />
        </label>
        <label>
          Duración horas:
          <input formControlName="duracionHoras" type="number" min="0" />
        </label>
        <label>
          Duración minutos:
          <input formControlName="duracionMinutos" type="number" min="0" max="59" />
        </label>
        <label>
          Profesional:
          <input formControlName="profesional" type="text" />
        </label>
        <button type="button" (click)="eliminarSesion(i)">Eliminar sesión</button>
      </div>
    </div>
    <button type="button" (click)="agregarSesion()">Agregar sesión</button>

    <button type="button" (click)="anteriorSeccion()">Anterior</button>
    <button type="button" (click)="siguienteSeccion()" [disabled]="!validarSeccionActual()">Siguiente</button>
  </div>

  <!-- SECCIÓN 3 -->
  <div *ngIf="seccionActual === 3" class="form-section">
    <h3>Política de Cancelación</h3>
    <div formGroupName="politicaDeCancelacion">
      <label>
        <textarea formControlName="texto"></textarea>
      </label>
    </div>
    <div *ngIf="tallerForm.get('politicaDeCancelacion.texto')?.invalid && tallerForm.get('politicaDeCancelacion.texto')?.touched" class="error">
      La política de cancelación es obligatoria.
    </div>

    <h3>Datos de Contacto</h3>
    <div formGroupName="datosDeContacto">
      <label>
        <textarea formControlName="texto"></textarea>
      </label>
    </div>
    <div *ngIf="tallerForm.get('datosDeContacto.texto')?.invalid && tallerForm.get('datosDeContacto.texto')?.touched" class="error">
      Los datos de contacto son obligatorios.
    </div>

    <button type="button" (click)="anteriorSeccion()">Anterior</button>
    <button type="submit" [disabled]="tallerForm.invalid">Guardar Taller</button>
  </div>

</form>
