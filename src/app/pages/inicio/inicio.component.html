<!-- Indicador de modo edición (visible solo para admins) -->
<app-edit-mode-indicator></app-edit-mode-indicator>

<!-- Portada -->
<div class="image-card-4">
  <div class="logo-container">
    <img [src]="getMediaSrc('hero-image')" 
         alt="Logo" 
         class="logo" 
         appEditableImage
         imageKey="hero-image"
         pageId="inicio"
         (imageChange)="onImageChange($event, 'hero-image')" />
  </div>
  <div class="card-content">
    <h2 appEditableContent 
        pageId="inicio" 
        contentId="hero-title"
        contentType="text">Psicoterapia e Hipnoterapia Clínica Online</h2>
  </div>
</div>

<!-- Primer card. Video -->
<div class="psychologist-card">
  <div class="psychologist-card-content">
    <video controls
           appEditableVideo
           videoKey="hero-video"
           pageId="inicio"
           (videoChange)="onVideoChange($event, 'hero-video')">
      <source [src]="getMediaSrc('hero-video')" type="video/mp4" />
      Tu navegador no soporta la reproducción de video.
    </video>

    <div class="text-section">
      <h2 appEditableContent 
          pageId="inicio" 
          contentId="hero-subtitle"
          contentType="text">Tu bienestar emocional es lo más importante</h2>
      <p appEditableContent 
         pageId="inicio" 
         contentId="hero-description"
         contentType="text">Agenda una cita con nuestro especialista y comienza tu camino hacia el equilibrio mental.</p>
      <a [routerLink]="'/formulario'" class="cta-button">Agendar cita</a>
    </div>
  </div>
</div>

<!-- Blog section (sin cambios) -->
<div class="blog-section">
  <h1 class="blog-title">Blog</h1>
  <div *ngIf="ultimosBlogs.length" class="blog-cards">
    <div *ngFor="let blog of ultimosBlogs.slice(0, 4)" class="blog-card">
      <img *ngIf="blog.imagen" [src]="blog.imagen" alt="{{ blog.titulo }}" class="blog-card-image" />
      <div *ngIf="blog.videoUrl" class="video-container">
        <iframe width="100%" height="200" [src]="sanitizarUrl(blog.videoUrl)" frameborder="0" allowfullscreen></iframe>
      </div>
      <h3 class="blog-card-title">{{ blog.titulo }}</h3>
      <p class="blog-card-description">{{ blog.descripcion | slice: 0:100 }}...</p>
      <a [routerLink]="['/blog', blog.id]" class="blog-card-link">Leer más</a>
    </div>
  </div>
</div>

<!-- Servicios -->
<div class="servicios-section">
  <h1 class="servicios-title">Servicios</h1>
  <div class="servicios-card-content">
    <div class="text-section">
      <p appEditableContent 
         pageId="inicio" 
         contentId="services-description"
         contentType="text">Nuestros servicios.</p>
    </div>
  </div>
</div>

<!-- Cards de Servicios Dinámicos -->
<div class="container-cards">
  <div *ngFor="let service of services; let i = index" class="card">
    <img [src]="getMediaSrc(service.imageKey)" 
         [alt]="service.title"
         appEditableImage
         [imageKey]="service.imageKey"
         pageId="inicio"
         (imageChange)="onImageChange($event, service.imageKey)" />
    
    <!-- Título editable -->
    <h2 appEditableContent 
        pageId="inicio" 
        [contentId]="'service-title-' + i"
        contentType="text">{{ service.title }}</h2>
    
    <!-- Lista de precios/información -->
    <ul class="card-list">
      <li *ngFor="let item of service.items; let j = index">
        <span appEditableContent 
              pageId="inicio" 
              [contentId]="'service-' + i + '-item-' + j"
              contentType="text">{{ item }}</span>
        <hr />
      </li>
    </ul>
    
    <!-- Botón con enlace -->
    <a [href]="service.link" class="btn">{{ service.buttonText }}</a>
  </div>
  
  <!-- Sección de Convenios Editable -->
  <div class="blog-titulo">
    <div class="additional-info">
      <h1 class="convenios-title">Convenios</h1>
      <p appEditableContent 
         pageId="inicio" 
         contentId="convenios-description"
         contentType="html">{{ conveniosInfo.description }}</p>
    </div>
  </div>
</div>

<!-- Texto de Tarot Editable -->
<div class="card-container">
  <div class="text-section1">
    <div style="display: flex; flex-direction: column; align-items: center;">
      <h1 class="tarot-title" style="text-align: center; margin-bottom: 1rem;">Tarot</h1>
      <p appEditableContent 
          pageId="inicio" 
          contentId="tarot-text"
          contentType="html">{{ tarotText.content }}</p>
      <a href="/tarotista" class="btn">Ver más</a>
    </div>
  </div>
  
  <div class="image-section">
    <img [src]="getMediaSrc('tarot-image')" 
         alt="Imagen de Servicios" 
         appEditableImage
         imageKey="tarot-image"
         pageId="inicio"
         (imageChange)="onImageChange($event, 'tarot-image')" />
  </div>
</div>

<!-- Sección de Comentarios -->
<div class="seccion-principal">
  <!-- Comentarios -->
  <div class="comentarios-card">
    <h2>Comentarios de Pacientes</h2>

    <div class="comentario">
      <p>"El psicólogo fue muy empático y me ayudó a ver las cosas desde otra perspectiva. Muy recomendado."</p>
      <div class="info">
        <span>— Ana M.</span>
        <span class="stars">★★★★★</span>
      </div>
    </div>

    <div class="comentario">
      <p>"Me sentí escuchado y comprendido en cada sesión. Excelente profesional."</p>
      <div class="info">
        <span>— Carlos R.</span>
        <span class="stars">★★★★☆</span>
      </div>
    </div>

    <div class="nuevo-comentario">
      <h3>Deja tu comentario</h3>
      <textarea placeholder="Escribe tu experiencia..."></textarea>
      <button>Enviar</button>
    </div>
  </div>

  <!-- Información de Contacto Editable (Unificada) -->
<div class="contacto-card">
  <div class="editable-section">
    <h2 appEditableContent 
        pageId="inicio" 
        contentId="contact-title"
        contentType="text">{{ contactInfo.title }}</h2>
    
    <div>
      <p *ngFor="let contact of contactInfo.items; let i = index"
         appEditableContent 
         [pageId]="'inicio'" 
         [contentId]="'contact-item-' + i"
         contentType="text">{{ contact }}</p>
    </div>
  </div>

  <!-- Contacto -->
  <h3>Encuéntranos también en:</h3>
  <ul>
    <li>
      <a href="https://www.2x3.cl/profesional/emhpsicoterapiaonline" target="_blank" class="contact-link">
        <button>2x3</button>
      </a>
    </li>
        <li>
      <a href="https://www.psychologytoday.com/profile/1022969" target="_blank" class="contact-link">
        <button>Psychology Today</button>
      </a>
    </li>

  <!-- Video de contacto -->
  <div class="video-container">
    <video controls>
      <source [src]="getMediaSrc('contact-video')" type="video/mp4" />
      Tu navegador no soporta la reproducción de video.
    </video>
  </div>

<a href="https://wa.me/56994739587?text=¡Hola!%20Me%20interesa%20tu%20servicio" target="_blank">
  <button class="whatsapp-button">
    <img src="https://upload.wikimedia.org/wikipedia/commons/6/6b/WhatsApp.svg" alt="WhatsApp" />
  </button>
</a>


