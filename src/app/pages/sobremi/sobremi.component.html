<!-- Indicador de modo edición (visible solo para admins) -->
<app-edit-mode-indicator></app-edit-mode-indicator>

<!-- Loader mientras carga el contenido -->
<div *ngIf="!contentLoaded" class="loading-spinner">
  <p>Cargando contenido...</p>
</div>

<!-- Card de presentación personal - Solo mostrar cuando contentLoaded es true -->
<div class="presentacion-card" *ngIf="contentLoaded">
    <img *ngIf="profileImageUrl"
         [src]="profileImageUrl" 
         alt="Eduardo Márquez" 
         class="foto-perfil"
         appEditableImage
         imageKey="profile-image"
         pageId="sobremi"
         (imageChange)="onImageChange($event, 'profile-image')" />
    <div class="texto-perfil">
      <h3 *ngIf="profileName"
          appEditableContent 
          pageId="sobremi" 
          contentId="profile-name"
          contentType="text">{{ profileName }}</h3>
      <p *ngIf="profileTitle"
         appEditableContent 
         pageId="sobremi" 
         contentId="profile-title"
         contentType="text">{{ profileTitle }}</p>
      <p *ngIf="profileSubtitle"
         appEditableContent 
         pageId="sobremi" 
         contentId="profile-subtitle"
         contentType="text">{{ profileSubtitle }}</p>
    </div>
  </div>
  
  <!-- Sección de links sociales -->
  <div class="social-links" *ngIf="contentLoaded">
    <a appEditableLink
       pageId="sobremi"
       linkKey="social-whatsapp"
       href="https://wa.me/56994739587?text=¡Hola!%20Me%20interesa%20tu%20servicio" 
       target="_blank" 
       aria-label="WhatsApp">
      <img src="assets/wtsp.avif" alt="WhatsApp" />
    </a>
    <a appEditableLink
       pageId="sobremi"
       linkKey="social-instagram"
       href="https://www.instagram.com/emhpsicoterapiaonline/" 
       target="_blank" 
       aria-label="Instagram">
      <img src="assets/insta.avif" alt="Instagram" />
    </a>
    <a appEditableLink
       pageId="sobremi"
       linkKey="social-facebook"
       href="https://www.facebook.com/tuapoyopsicologico2.0" 
       target="_blank" 
       aria-label="Facebook">
      <img src="assets/face.avif" alt="Facebook" />
    </a>
    <a appEditableLink
       pageId="sobremi"
       linkKey="social-linkedin"
       href="https://www.linkedin.com/in/eduardo-m%C3%A1rquez-huerta-7a840915/" 
       target="_blank" 
       aria-label="LinkedIn">
      <img src="assets/lin.avif" alt="LinkedIn" />
    </a>
    <a appEditableLink
       pageId="sobremi"
       linkKey="social-tiktok"
       href="https://www.tiktok.com/@emhpsicoterapiaonline" 
       target="_blank" 
       aria-label="TikTok">
      <img src="assets/tik.avif" alt="TikTok" />
    </a>
  </div>

  <!-- Sección Sobre mí - Solo mostrar cuando contentLoaded es true -->
  <div class="about-me" *ngIf="contentLoaded">
    <h2 *ngIf="aboutTitle"
        class="about-title"
        appEditableContent 
        pageId="sobremi" 
        contentId="about-title"
        contentType="text">{{ aboutTitle }}</h2>
    <p *ngIf="aboutDescription"
       class="about-description"
       appEditableContent 
       pageId="sobremi" 
       contentId="about-description"
       contentType="text">{{ aboutDescription }}</p>
  </div>

  <!-- Cards de características - Solo mostrar cuando contentLoaded es true -->
  <div class="cards-container" *ngIf="contentLoaded">
    <div class="card" *ngFor="let card of cards; let i = index">
      <h3 *ngIf="card.title"
          class="card-title"
          appEditableContent 
          pageId="sobremi" 
          [contentId]="'card-' + i + '-title'"
          contentType="text">{{ card.title }}</h3>
      <p *ngIf="card.description"
         class="card-description"
         appEditableContent 
         pageId="sobremi" 
         [contentId]="'card-' + i + '-description'"
         contentType="text">{{ card.description }}</p>
    </div>
  </div>
  